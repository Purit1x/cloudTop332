# 弈子移动组件

## 核心内容

### TickComponent

每帧更新。每帧中，至多执行移动与旋转中的一种。

1. 错误处理
2. 执行旋转，若执行了旋转
3. 获取要去往的格点
4. 若有，且尚未达到，将其设为目标点
5. 移动组件

#### 旋转

先获取组件的FRotator，再获取要旋转到的目标旋转度，若二者之差在可接受范围内，即可认为旋转已完成。执行旋转完成时的相关委托。

否则，使用FMath中的RInterpConstantTo函数来进行线性插值，表示平滑的旋转，然后对组件进行更新。

#### 移动组件

查看是否已到终点（路径为空），若尚未到达终点，则获取下一个路径格点，由于是指针，需进行错误处理。当尚未到达该格点时，将其设为目标格点。

判断在本次Tick的Delta时间内弈子能否移动到目标格点处，若能，则移动距离即为弈子与格点间距离，否则为DeltaTime内能移动的最大距离。

移动速度（矢量）为MovementDelta / DeltaTime。

若本次移动可以到达下一个格点，则认为格点已达到，将其从路径中删除。若删除后路径为空，即移动完成，执行移动完成相关委托。否则执行达到中途点的相关委托。

## Misc

ChequerMovementComponent的元数据说明符应为BlueprintSpawnableComponent，否则使用蓝图类创建弈子角色时无法将无法为弈子添加移动组件。